<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" type="text/css" href="css/cat.css"/>
</head>

<body>
    <!-- Items -->
    <div id='items_layout' class='items-layout'>
    </div>
</body>

<script>
    let catId = 0;

    function layoutItems(items) {

        let items_layout_query = document.getElementById('items_layout');
        items_layout_query.innerHTML = ' ';
        let id = 1;

        items.forEach(function (item) {
            let item_html = "";

            if (id == catId) {

                id++;

                item_html += "<div class=item>";
                item_html += '<a href="' + "cat.html?id=" + id + '">';
                item_html += '<div class=item_img><img src="' + item.image_link + '"/></div>';
                item_html += '</a>';
                item_html += '<div><span class=item_name>' + item.name + '</span>';
                item_html += '<span class=item_type>' + item.type + '</span></div>';
                item_html += '<button class="listen-btn" onclick="adoptThisCat(this)" data-id="'+ id +'"> Listen </button>';
                item_html += '<button class="adopt-btn" onclick="adoptThisCat(this)" data-id="'+ id +'"> Adopt </button>';
                item_html += '<div class=item_body>';
                item_html += '<div class=item_attr><ul><li>age:' + item.age + '</li><li>' + item.gender + '</li><li>' + item.description + '</li></ul></div>';
                item_html += '</div>';
                item_html += '</div>';

                items_layout_query.innerHTML += item_html;
            }

            id++;

        })

        document.innerHTML += items_layout_query.innerHTML;
    }

    function readJSONFile(file) {
        fetch(file).then(response => {
            return response.json();
        }).then(data => {
            totalItems = data.items;
            layoutItems(totalItems);
        });
    }

    /* Parse url and load cat from index */
    function loadData() {
        var id = location.search;

        if (!id) return;

        id = id.substr(4);
        catId = parseInt(id);

        readJSONFile("./seeders/item.json");
    }

    loadData();
</script>

</html>