let typeCategorySet=new Set,totalItems=[],typeFilter="All",currentPage=1,totalPage=0;const numbersInaPage=8;let items_layout_query=document.getElementById("items_layout");function renderPagitation(){let pagination_html="";pagination_html+=`<div class="pagination_div">\n                    <ul  class="pagination">\n                        <li ${1===currentPage?'class="disabled"':'onclick="afterPushButtonPutVarIn(1)"'} ><<</li>\n                        <li ${1===currentPage?'class="disabled"':`onclick="afterPushButtonPutVarIn(${currentPage-1})"`}><</li>\n                        ${createPagitationList()}\n                        <li ${currentPage===totalPage?'class="disabled"':`onclick="afterPushButtonPutVarIn(${currentPage+1})"`}>></li>\n                        <li ${currentPage===totalPage?'class="disabled"':'onclick="afterPushButtonPutVarIn(totalPage)"'}>>></li>\n                    </ul>\n                </div>`,items_layout_query.innerHTML+=pagination_html}function createPagitationList(){let totalPage_Array=new Array(totalPage);for(let i=1;i<=totalPage;i++)totalPage_Array[i]=i;return totalPage_Array.reduce((accmulator,currentValue)=>accmulator+`<li ${currentPage===currentValue?'class="active"':`onclick="afterPushButtonPutVarIn(${currentValue})"`}>${currentValue}</li>`,"")}function afterPushButtonPutVarIn(page){currentPage=page,items_layout_query.innerHTML="",layoutItems(totalItems)}function rerenderItemsByTypeFilter(type){typeFilter=type;let filterItems="All"===typeFilter?totalItems:totalItems.filter(item=>item.type===type);currentPage=1,layoutItems(filterItems)}function renderDataFilter(){const typeCategoryArray=Array.from(typeCategorySet);items_layout_query.innerHTML+=`<div id="filter-element" class="filter-element">\n            <span>Type:</span>\n            <select onchange="rerenderItemsByTypeFilter(this.options[this.selectedIndex].value);">\n                <option value="All">All</option>\n                ${typeCategoryArray.reduce((accumulator,currentValue,currentIndex)=>accumulator+`<option value="${currentValue}" ${typeFilter===currentValue?"selected":""}>${currentValue}</option>`,"")}\n            </select>\n        </div>`,document.getElementById("filter-division").appendChild(document.getElementById("filter-element"))}function getCalculatedId(badIndex){return 8*(currentPage-1)+badIndex}function layoutItems(items){items_layout_query.innerHTML='<div id="filter-division" class="filter-division"></div>';let i=1,id=0;totalPage=Math.floor((items.length-1)/8)+1;const itemsInCertainPage=items.slice(8*(currentPage-1),8*currentPage);renderPagitation(),totalItems.forEach((function(item){typeCategorySet.add(item.type)})),itemsInCertainPage.forEach((function(item){let item_html="";item_html+="<div class=item>",item_html+='<a href="cat.html?id='+getCalculatedId(i++)+'">',item_html+='<div class=item_img><img src="'+item.image_link+'"/></div>',item_html+="</a>",item_html+="<div><span class=item_name>"+item.name+"</span>",item_html+="<span class=item_type>"+item.type+"</span></div>",item_html+="<div class=item_body>",item_html+="<div class=item_attr><ul><li>age:"+item.age+"</li><li>"+item.gender+"</li><li>"+item.description+"</li></ul></div>",item_html+='<button class="adopt-btn" onclick="adoptThisCat(this)" data-id="'+id+++'"> Adopt </button>',item_html+="</div>",item_html+="</div>",items_layout_query.innerHTML+=item_html})),renderPagitation(),renderDataFilter()}function readJSONFile(file){fetch(file).then(response=>response.json()).then(data=>{totalItems=data.items,layoutItems(totalItems),renderCartInfo()})}readJSONFile("./seeders/item.json");let user=$.cookie("user"),adoptedNumber=0;const numberHtml=document.getElementsByClassName("cart-number");let id=[];function renderCartInfo(){$.get(` https://catropolis-55dac-default-rtdb.firebaseio.com/User-Cart/${user}/.json`,null,(function(res){console.log(res);let adoptedNumber=Object.keys(res).length;numberHtml[0].innerHTML=`<a href="cart.html?id=${id}" target="_blank"><div class="cart"><i class="bi bi-cart-fill"></i> Adopted ${adoptedNumber}</div></a>`}))}function adoptThisCat(adoptedItemBtn){let id_no,catID=Number(adoptedItemBtn.dataset.id)+8*(currentPage-1),x=0,user=$.cookie("user");function sendToDB(){let data={id:catID};firebase.database().ref("User-Cart/"+user+"/"+data.id).set(data,(function(error){error?console.log(error):alert("The Cat Is Added To Your Adoption-Cart!  Click Your Cart To Check Cats You Adopt.")}))}id.forEach((function(id){id!=catID&&x++})),x==id.length?(console.log(catID),id.push(catID),sendToDB(),renderCartInfo()):alert("This Cat is Already In The Cart.")}$(document).ready((function(){if(!$.cookie("user")||null===$.cookie("user")){let user=prompt("Please enter User name","Type your name here");$.cookie("user",user)}}));